<? 
    include("../php_scripts/connect_database.php");
    include("php_scripts/master_table_layer.php"); 
    /*Release 5.2.1.7 Begin*/
    /*change wordding*/
    if(($LEVEL_NO=="K5" || $LEVEL_NO=="O3")){
        $lbl_layer_salary_min='เงินเดือนขั้นต่ำ';/*เงินเดือนขั้นต่ำ : => เงินเดือนขั้นต่ำ : */
        $lbl_layer_salary_max='เงินเดือนขั้นสูง(2)';/*เงินเดือนขั้นสูง : => เงินเดือนขั้นสูง(2) : */
        $lbl_layer_salary_tempup='**เงินเดือนขั้นสูงตามมติ ครม.';/***เงินเดือนขั้นสูงตามมติ ครม. : => **เงินเดือนขั้นสูงตามมติ ครม. : */
        $lbl_layer_salary_temp='เงินเดือนขั้นต่ำชั่วคราว';/*เงินเดือนขั้นต่ำชั่วคราว : => เงินเดือนขั้นต่ำชั่วคราว : */
        $lbl_layer_salary_midpoint='เงินเดือนที่นำมาแบ่งช่วง(2)';/*เงินเดือนที่นำมาแบ่งช่วง : => เงินเดือนที่นำมาแบ่งช่วง(2) : */
        $lbl_layer_salary_midpoint1='ฐานในการคำนวณล่าง(2)';/*ฐานในการคำนวณล่าง : => ฐานในการคำนวณล่าง(2) : */
        $lbl_layer_salary_midpoint2='ฐานในการคำนวณบน(2)';/*ฐานในการคำนวณบน : => ฐานในการคำนวณบน(2) : */
        $lbl_layer_salary_full='เงินเดือนขั้นสูง(1)';/*เงินเดือนพิเศษ : => เงินเดือนขั้นสูง(1) : */
        $lbl_layer_extra_midpoint='เงินเดือนที่นำมาแบ่งช่วง(1)';/*เงินเดือนที่นำมาแบ่งช่วง : => เงินเดือนที่นำมาแบ่งช่วง(1) : */
        $lbl_layer_extra_midpoint1='ฐานในการคำนวณล่าง(1)';/*ฐานในการคำนวณล่าง : => ฐานในการคำนวณล่าง(1) : */
        $lbl_layer_extra_midpoint2='ฐานในการคำนวณบน(1)';/*ฐานในการคำนวณบน : => ฐานในการคำนวณบน(1) : */
    }else{
        $lbl_layer_salary_min='เงินเดือนขั้นต่ำ';/*เงินเดือนขั้นต่ำ :*/
        $lbl_layer_salary_max='เงินเดือนขั้นสูง';/*เงินเดือนขั้นสูง :*/
        $lbl_layer_salary_tempup='**เงินเดือนขั้นสูงตามมติ ครม.';/***เงินเดือนขั้นสูงตามมติ ครม. :*/
        $lbl_layer_salary_temp='เงินเดือนขั้นต่ำชั่วคราว';/*เงินเดือนขั้นต่ำชั่วคราว :*/
        $lbl_layer_salary_midpoint='เงินเดือนที่นำมาแบ่งช่วง';/*เงินเดือนที่นำมาแบ่งช่วง :*/
        $lbl_layer_salary_midpoint1='ฐานในการคำนวณล่าง';/*ฐานในการคำนวณล่าง :*/
        $lbl_layer_salary_midpoint2='ฐานในการคำนวณบน';/*ฐานในการคำนวณบน :*/
        $lbl_layer_salary_full='เงินเดือนพิเศษ';/*เงินเดือนพิเศษ :*/
    }   
    $sql ="SELECT LAYER_SALARY_MIDPOINT FROM PER_LAYER WHERE LAYER_TYPE = 0 AND LEVEL_NO = 'O1' AND LAYER_NO = 0";
    $db_dpis->send_cmd($sql);

    $data = $db_dpis->get_array();
    $select_layer_salary_midpoint = $data[LAYER_SALARY_MIDPOINT];
    $bgbtn3='';
    $bgbtn4='';
    $bgbtn5='';
    $bgbtn6='';
    $bgbtn7='';
    $bgbtn8='';
    //echo $select_layer_salary_midpoint;
    switch ($select_layer_salary_midpoint) {
        case 13715 :/*COPY3 ๑ เมษายน ๒๕๕๘*/
            $bgbtn3='style="background-color: #2d7fbb"';
            break;
        case 13995: /*COPY4 ๑ ตุลาคม ๒๕๕๘*/
            $bgbtn4='style="background-color: #2d7fbb"';
            break;
        case 14275: /*COPY5 ๑ เมษายน ๒๕๕๙*/
            $bgbtn5='style="background-color: #2d7fbb"';
            break;
        case 14565: /*COPY6 ๑ ตุลาคม ๒๕๕๙*/
            $bgbtn6='style="background-color: #2d7fbb"';
            break;
        case 14865: /*COPY7 ๑ เมษายน ๒๕๖๐*/
            $bgbtn7='style="background-color: #2d7fbb"';
            break;
        case 15215: /*COPY8 ๑ ตุลาคม ๒๕๖๐*/
            $bgbtn8='style="background-color: #2d7fbb"';
            break;  
    }
    /*Release 5.2.1.7 End*/

 $sql ="SELECT  LAYER_SALARY_MAX  FROM PER_LAYER WHERE LAYER_TYPE = 0 AND LEVEL_NO = 'E1' AND LAYER_NO = 0";
    $db_dpis->send_cmd($sql);
    $data = $db_dpis->get_array();
    $LAYER_SALARY_MAX_E1 = $data[LAYER_SALARY_MAX];
    switch($LAYER_SALARY_MAX_E1){
        case 19430: 
            $bgbtn_e1='style="background-color:#f57c00"';
            break;
            
        case 20210 :
            $bgbtn_e2='style="background-color:#f57c00"';
            break;    
    }
?>
<html>
<head>
<title><?=$webpage_title?> - <?=$MENU_TITLE_LV0?><?if($MENU_ID_LV1){?> - <?=$MENU_TITLE_LV1?><?}?><?if($MENU_ID_LV2){?> - <?=$MENU_TITLE_LV2?><?}?><?if($MENU_ID_LV3){?> - <?=$MENU_TITLE_LV3?><?}?></title>
<meta http-equiv="Content-Type" content="text/html; charset=windows-874">
<link rel="stylesheet" href="<?=$cssfileselected?>" type="text/css">
</head>
<script type="text/javascript" src="java_scripts/function_utility.js"></script> 
<script language="JavaScript">
	function change_current_page( page ){
		form1.current_page.value = page;
		form1.submit();
	}
	
	function confirm_delete(data_id0 , data_id1, data_id2 , data_label0){
		if(confirm("คุณต้องการลบข้อมูลนี้ [ " + data_label0 + " : " + data_id1 + " : " + data_id2 + " ]  ใช่หรือไม่ ?")){
			form1.command.value = "DELETE";
			
//			form1.<?=LAYER_TYPE?>.value = data_id0;
			form1.<?=LAYER_TYPE?>[((data_id0 + 2) % 3)].checked = true;
			form1.<?=LEVEL_NO?>.value = data_id1;
			form1.<?=LAYER_NO?>.value = data_id2;
			form1.submit();
		} // end if
	}

	
	    function call_rtf_pdf_report(report_type) {
	    var  report_type
		var currDate = new Date();
		var rptDate = currDate.getFullYear().toString() + currDate.getMonth().toString() + currDate.getDate().toString(); 
			   rptDate += currDate.getHours().toString() + currDate.getMinutes().toString() + currDate.getSeconds().toString();
		var report_title = "รายงานข้อมูล<?=($MENU_ID_LV3)?$MENU_TITLE_LV3:(($MENU_ID_LV2)?$MENU_TITLE_LV2:(($MENU_ID_LV1)?$MENU_TITLE_LV1:(($MENU_ID_LV0)?$MENU_TITLE_LV0:"")))?>";
		document.form1.target = "_blank";
		 if (report_type==1){
		document.form1.action = "report/rpt_master_table_layer.php?report_title=" + report_title + "&table=<?=$table?>&UTC" + rptDate+"&FLAG_RTF=1";
		}else if (report_type==0){ 
		document.form1.action = "report/rpt_master_table_layer.php?report_title=" + report_title + "&table=<?=$table?>&UTC" + rptDate+"&FLAG_RTF=0";
		}
		document.form1.submit();
		document.form1.target = "_self";
		document.form1.action = "master_table_layer.html";
	} 
	
	function call_export_file() {
		var currDate = new Date();
		var rptDate = currDate.getFullYear().toString() + currDate.getMonth().toString() + currDate.getDate().toString(); 
			   rptDate += currDate.getHours().toString() + currDate.getMinutes().toString() + currDate.getSeconds().toString();
		var report_title = "รายงานข้อมูล<?=($MENU_ID_LV3)?$MENU_TITLE_LV3:(($MENU_ID_LV2)?$MENU_TITLE_LV2:(($MENU_ID_LV1)?$MENU_TITLE_LV1:(($MENU_ID_LV0)?$MENU_TITLE_LV0:"")))?>";
		document.form1.target = "_blank";
		document.form1.action = "report/rpt_master_table_layer_xls.php?report_title=" + report_title + "&table=<?=$table?>&UTC" + rptDate;
		document.form1.submit();
		document.form1.target = "_self";
		document.form1.action = "master_table_layer.html";
	}	
	
	function confirm_execute(per_type){
		if(per_type==0 || per_type==1 || per_type==3 || per_type==4 || per_type==5 || per_type==6 || per_type==7 || per_type==8){ 
			per_type_name="ข้าราชการ";	
		}else if(per_type==2 || per_type==22){	 //22=>ตามประกาศคณะกรรมการบริหารพนักงานราชการ เรื่อง ค่าตอบแทนของพนักงานราชการ (ฉบับที่ 8) พ.ศ. 2558
			per_type_name="พนักงานราชการ";	
		}
		var answer = confirm('ต้องการปรับเปลี่ยนบัญชี'+per_type_name+'หรือไม่ ?\n');
		if(answer==true){ //ยืนยัน
			if(per_type==0){
			   form1.command.value='COPY0';
			}else if(per_type==1){
			   form1.command.value='COPY';
			}else if(per_type==2){
				form1.command.value='COPYEMPSER';
			}else if(per_type==3){
				form1.command.value='COPY3';
			}else if(per_type==4){
				form1.command.value='COPY4';
			}else if(per_type==5){
				form1.command.value='COPY5';
			}else if(per_type==6){
				form1.command.value='COPY6';
			}else if(per_type==7){
				form1.command.value='COPY7';
			}else if(per_type==8){
				form1.command.value='COPY8';
			}else if(per_type==22){
				form1.command.value='COPYEMPSER_BOOK8';
			}
		}else{
				form1.current_page.value=0;
				form1.command.value='CANCEL';
		}
		//alert(form1.command.value);
	}
	function call_sort(flag) {
		form1.order_by.value=flag;		form1.sort_by.value=flag;
		if(form1.sort_type.value==flag+":asc"){
			form1.sort_type.value=flag+":desc";
		}else{ //desc
			form1.sort_type.value=flag+":asc";
		}		
		form1.command.value='SEARCH';
		form1.submit();
	} // end function call_sort
</script>
<?
if ($UPD)
$Submit = "Submit_edit";
else 
$Submit = "Submit_add";
?>
<body>
<table width="100%" border="0" cellspacing="0" cellpadding="0" class="label_normal">
	<tr>
    	<td height="10"><?include("header_menu.html")?></td>
  	</tr>
    <tr> 
	  <td align="left" valign="top">
<?	
		if ($UPD) $OPTIONAL_TITLE=" &gt; แก้ไขข้อมูล"; elseif ($VIEW) $OPTIONAL_TITLE=" &gt; ดูข้อมูล";
		include("current_location.html");
?>
	  </td>
	</tr>
  	<tr>
    	<td align="left" valign="top"><form name="form1" method="post" action="master_table_layer.html" enctype="multipart/form-data">
          <input type="hidden" name="current_page" value="<?=$current_page?>">
          <input type="hidden" name="total_page" value="<?=$total_page?>">
		  <input type="hidden" name="MENU_ID_LV0" value="<?=$MENU_ID_LV0?>">
		  <input type="hidden" name="MENU_ID_LV1" value="<?=$MENU_ID_LV1?>">
		  <input type="hidden" name="MENU_ID_LV2" value="<?=$MENU_ID_LV2?>">
		  <input type="hidden" name="MENU_ID_LV3" value="<?=$MENU_ID_LV3?>">
          <input type="hidden" name="command" value="">
          <input type="hidden" name="table" value="<?=$table?>">
		  <input type="hidden" name="old_LAYER_TYPE" value="<?=$old_LAYER_TYPE?>">
		  <input type="hidden" name="old_LEVEL_NO" value="<?=$old_LEVEL_NO?>">
		  <input type="hidden" name="old_LAYER_NO" value="<?=$old_LAYER_NO?>">		  		  
&nbsp;
<table width="90%" align="center" cellpadding="0" cellspacing="0">
  	<tr>
	  <td><table width="15%" cellpadding="0" cellspacing="0" class="input_table" style="border-bottom:none;">
		  <tr>
		  	<td height="22" align="center" class="table_body"><?=($UPD)?"แก้ไข":"เพิ่ม"?>ข้อมูล</td>
		  </tr>		
	  </table></td>
	</tr>
  </table>
  <table width="90%" align="center" cellpadding="0" cellspacing="0" class="input_table" 
  onKeyPress="return keyEnter(event,document.form1.<?=$Submit?>);">
    <tr>
      <td><table width="100%" border="0" align="center" cellpadding="0" cellspacing="0" class="label_normal">
        <tr>
          <td colspan="2" height="5"></td>
          </tr>
        <tr>
          <td width="35%" height="22" align="right"><span class="label_alert">*</span>&nbsp;<?=$LEVEL_TITLE?>&nbsp;:&nbsp;</td>
          <td width="65%"><? $tmp_dat = trim($LEVEL_NO);  list_per_level_master("LEVEL_NO", $tmp_dat); ?>&nbsp;&nbsp;<span class="label_alert"><?=$err_text?></span></td>
        </tr>
        <tr>
          <td align="right"><span class="label_alert">*</span>&nbsp;ประเภทเงินเดือน&nbsp;:&nbsp;</td>
          <td><input type="radio" name="salary_type" value="1" onClick="document.all.SALARY_LEVEL.style.display='block'; document.all.SALARY_RANGE.style.display='none';" <?=($SALARY_TYPE==1)?"checked":""?>>ขั้นเงินเดือน&nbsp;&nbsp;&nbsp;<input type="radio" name="salary_type" value="2" onClick="document.all.SALARY_LEVEL.style.display='none'; document.all.SALARY_RANGE.style.display='block';" <?=($SALARY_TYPE==2)?"checked":""?>>ช่วงเงินเดือน</td>
        </tr>
        <tr>
          <td align="right">&nbsp;</td>
          <td height="22" class="label_alert"> * ถ้าเลือกเป็นขั้นเงินเดือน ข้อมูลช่วงเงินเดือนของ ระดับตำแหน่งและประเภทข้าราชการที่เลือก จะถูกลบ</td>
        </tr>
        <tr>
          <td align="right">&nbsp;</td>
          <td height="22" class="label_alert"> * ถ้าเลือกเป็นช่วงเงินเดือน ข้อมูลขั้นเงินเดือนของ ระดับตำแหน่งและประเภทข้าราชการที่เลือก จะถูกลบทั้งหมด</td>
        </tr>
        <tr>
          <td colspan="2" align="center">
		  <div id="SALARY_LEVEL" style="display:<?=($SALARY_TYPE==1)?"block":"none"?>">
		  <table width="100%" border="0" cellpadding="0" cellspacing="0" class="label_normal">
            <tr>
              <td width="35%" align="right"><span class="label_alert">*</span>&nbsp;ขั้น&nbsp;:&nbsp;</td>
              <td><input type="text" name="<?=LAYER_NO?>" value="<?=$LAYER_NO?>" style="width:20%" class="textbox" onKeyPress="return NumOnly();"></td>
            </tr>
            <tr>
              <td align="right"><span class="label_alert">*</span>&nbsp;<?=$SALARY_TITLE?>&nbsp;:&nbsp;</td>
              <td><input type="text" name="<?=LAYER_SALARY?>" value="<?=$LAYER_SALARY?>" style="width:20%" class="textbox" onKeyPress="return NumOnly();"></td>
            </tr>
          </table>
		  </div>
		  <div id="SALARY_RANGE" style="display:<?=($SALARY_TYPE==2)?"block":"none"?>">
		  <table width="100%" border="0" cellpadding="0" cellspacing="0" class="label_normal">
            <tr>
              <td align="right"><?php echo $lbl_layer_salary_tempup;?>&nbsp;:&nbsp;</td><!-- **เงินเดือนขั้นสูงตามมติ ครม.-->
              <td><input type="text" name="<?=LAYER_SALARY_TEMPUP?>" value="<?=$LAYER_SALARY_TEMPUP?>" style="width:20%" class="textbox" onKeyPress="return NumOnly();"></td>
            </tr>
            <tr>
              <td align="right"><?php echo $lbl_layer_salary_max;?>&nbsp;:&nbsp;</td><!-- เงินเดือนขั้นสูง-->
              <td><input type="text" name="<?=LAYER_SALARY_MAX?>" value="<?=$LAYER_SALARY_MAX?>" style="width:20%" class="textbox" onKeyPress="return NumOnly();"></td>
            </tr>
            <tr>
              <td width="35%" align="right"><?php echo $lbl_layer_salary_midpoint2;?>&nbsp;:&nbsp;</td><!-- ฐานในการคำนวณบน -->
              <td><input type="text" name="<?=LAYER_SALARY_MIDPOINT2?>" value="<?=$LAYER_SALARY_MIDPOINT2?>" style="width:20%" class="textbox" onKeyPress="return NumOnly();"></td>
            </tr>
            <tr>
              <td width="35%" align="right"><?php echo $lbl_layer_salary_midpoint;?>&nbsp;:&nbsp;</td><!-- เงินเดือนที่นำมาแบ่งช่วง -->
              <td><input type="text" name="<?=LAYER_SALARY_MIDPOINT?>" value="<?=$LAYER_SALARY_MIDPOINT?>" style="width:20%" class="textbox" onKeyPress="return NumOnly();"></td>
            </tr>
            <tr>
              <td width="35%" align="right"><?php echo $lbl_layer_salary_midpoint1;?>&nbsp;:&nbsp;</td> <!-- ฐานในการคำนวณล่าง -->
              <td><input type="text" name="<?=LAYER_SALARY_MIDPOINT1?>" value="<?=$LAYER_SALARY_MIDPOINT1?>" style="width:20%" class="textbox" onKeyPress="return NumOnly();"></td>
            </tr>
            <? if(($LEVEL_NO=="K5" || $LEVEL_NO=="O3") && $SALARY_TYPE==2){ ?>
                <tr>
                    <td width="35%" align="right"><?php echo $lbl_layer_salary_full;?>&nbsp;:&nbsp;</td><!-- เงินเดือนพิเศษ -->
                    <td><input type="text" name="<?=LAYER_SALARY_FULL?>" value="<?=$LAYER_SALARY_FULL?>" style="width:20%" class="textbox" onKeyPress="return NumOnly();"></td>
                </tr>
            <? }?>
            <?if(($LEVEL_NO=="K5" || $LEVEL_NO=="O3") && $SALARY_TYPE==2){?>
            <tr>
              <td width="35%" align="right"><?php echo $lbl_layer_extra_midpoint2;?>&nbsp;:&nbsp;</td> <!-- ฐานในการคำนวณบน-->
              <td><input type="text" name="<?=LAYER_EXTRA_MIDPOINT2?>" value="<?=$LAYER_EXTRA_MIDPOINT2?>" style="width:20%" class="textbox" onKeyPress="return NumOnly();"></td>
            </tr>
            <tr>
              <td width="35%" align="right"><?php echo $lbl_layer_extra_midpoint;?>&nbsp;:&nbsp;</td><!-- เงินเดือนที่นำมาแบ่งช่วง -->
              <td><input type="text" name="<?=LAYER_EXTRA_MIDPOINT?>" value="<?=$LAYER_EXTRA_MIDPOINT?>" style="width:20%" class="textbox" onKeyPress="return NumOnly();"></td>
            </tr>
            <tr>
              <td width="35%" align="right"><?php echo $lbl_layer_extra_midpoint1;?>&nbsp;:&nbsp;</td><!-- ฐานในการคำนวณล่าง -->
              <td><input type="text" name="<?=LAYER_EXTRA_MIDPOINT1?>" value="<?=$LAYER_EXTRA_MIDPOINT1?>" style="width:20%" class="textbox" onKeyPress="return NumOnly();"></td>
            </tr>
            <? } ?>       
            <tr>
              <td width="35%" align="right"><?php echo $lbl_layer_salary_min;?>&nbsp;:&nbsp;</td><!--เงินเดือนขั้นต่ำ-->
              <td><input type="text" name="<?=LAYER_SALARY_MIN?>" value="<?=$LAYER_SALARY_MIN?>" style="width:20%" class="textbox" onKeyPress="return NumOnly();"></td>
            </tr>
            <tr>
              <td width="35%" align="right"><?php echo $lbl_layer_salary_temp;?>&nbsp;:&nbsp;</td><!-- เงินเดือนขั้นต่ำชั่วคราว -->
              <td><input type="text" name="<?=LAYER_SALARY_TEMP?>" value="<?=$LAYER_SALARY_TEMP?>" style="width:20%" class="textbox" onKeyPress="return NumOnly();"></td>
            </tr>
            <? if(($LEVEL_NO=="K5" || $LEVEL_NO=="O3") && $SALARY_TYPE==2){
            
            }else{ ?>
            <tr>
              <td width="35%" align="right"><?php echo $lbl_layer_salary_full;?>&nbsp;:&nbsp;</td><!-- เงินเดือนพิเศษ -->
              <td><input type="text" name="<?=LAYER_SALARY_FULL?>" value="<?=$LAYER_SALARY_FULL?>" style="width:20%" class="textbox" onKeyPress="return NumOnly();"></td>
            </tr>
            <? } ?>            
          </table>
		  </div>		  </td>
          </tr>
        <tr>
          <td width="35%" align="right">ประเภทบัญชีเงินเดือน&nbsp;:&nbsp;</td>
          <td width="65%"><input type="radio" name="<?=LAYER_TYPE?>" value="1" <?=($LAYER_TYPE==1)?"checked":""?>>พรบ.2535 (ท)&nbsp;&nbsp;&nbsp;<input type="radio" name="<?=LAYER_TYPE?>" value="2" <?=($LAYER_TYPE==2)?"checked":""?>>พรบ.2535 (บ) &nbsp;&nbsp;&nbsp;<input type="radio" name="<?=LAYER_TYPE?>" value="0" <?=($LAYER_TYPE==0)?"checked":""?>><?=$LAYER_TYPE_TITLE?></td>
        </tr>	  
        <tr>
          <td width="35%" align="right"><?=$ACTIVE_TITLE?>&nbsp;:&nbsp;</td>
          <td width="65%"><input type="radio" name="<?=LAYER_ACTIVE?>" value="1" <?=($LAYER_ACTIVE==1)?"checked":""?>>ใช้งาน&nbsp;&nbsp;&nbsp;<input type="radio" name="<?=LAYER_ACTIVE?>" value="0" <?=($LAYER_ACTIVE==0)?"checked":""?>>ยกเลิก</td>
        </tr>
            <tr>
              <td align="right"><?=$UPDATE_USER_TITLE?>&nbsp;:&nbsp;</td>
              <td><input name="SHOW_UPDATE_USER" type="text" style="width:70%" class="textbox" value="<?=$SHOW_UPDATE_USER?>" readonly></td>
        </tr>
            <tr>
              <td align="right"><?=$UPDATE_DATE_TITLE?>&nbsp;:&nbsp;</td>
              <td><input name="SHOW_UPDATE_DATE" type="text" class="textbox" value="<?=$SHOW_UPDATE_DATE?>" readonly></td>
            </tr>
        <tr align="center">
          <td height="30" colspan="2"><br><? if ($UPD) { 
		  		if ($BUTTON_DISPLAY==1) { ?>
            <input type="submit" name="Reset2" value="<?=$CANCEL_TITLE?>" onClick="form1.command.value='CANCEL'" class="button" >
            <? } else { ?>
            <input name="image" type="image" onClick="form1.command.value='CANCEL'" src="images/cancel.gif" alt="<?=$CANCEL_TITLE?>" border="0">
            <?}?>
            <?if($PAGE_AUTH["edit"]=="Y"){
			  		if ($BUTTON_DISPLAY==1) { ?>
            <input name="Submit_edit" type="submit" class="button" onClick="form1.command.value='UPDATE'" value="<?=$EDIT_TITLE?>">
            <? } else { ?>
            <input name="image" type="image" onClick="form1.command.value='UPDATE'" src="images/save.png" alt="<?=$EDIT_TITLE?>" border="0">
            <?}?>
            <?}?>
            <? } else { 
			  	if ($BUTTON_DISPLAY==1) { ?>
            <input name="Reset2" type="reset" class="button" value="<?=$CLEAR_TITLE?>">
            <? } else { ?>
            <img src="images/default.jpg" alt="<?=$CLEAR_TITLE?>" width="32" height="32" border="0" onClick="form1.reset();">&nbsp;
			<?}?>
            <?if($PAGE_AUTH["add"]=="Y"){
			  		if ($BUTTON_DISPLAY==1) { ?>
            <input name="Submit_add" type="submit" class="button" onClick="form1.command.value='ADD'" value="<?=$ADD_TITLE?>">
            <? } else { ?>
            <input name="image" type="image" onClick="form1.command.value='ADD'" src="images/save.png" alt="<?=$ADD_TITLE?>" border="0">
            <?}?>
            <?}?>
            <?}?>
            <br><br>
            <?if($PAGE_AUTH["print"]=="Y" && $table=="PER_LAYER"){?> <? if ($BUTTON_DISPLAY==1) { ?>
            <input type="submit" name="Copy" value="ปรับบัญชีข้าราชการ ๖ มิ.ย. ๒๕๕๔" onClick="javscript:confirm_execute(0);" class="button" > 
            <input type="submit" name="Copy" value="ปรับบัญชีข้าราชการ ๑ ธ.ค. ๒๕๕๗" onClick="javscript:confirm_execute(1);" class="button" > 
            <?  if($BKK_FLAG != 1 && $ISCS_FLAG != 1){ ?>
            <input type="submit" name="Copy" value="ปรับบัญชีพนักงานราชการใหม่" onClick="javscript:confirm_execute(2);" class="button" <?php echo $bgbtn_e1;?> > 
            <input type="submit" name="CopyCASE8" value="ปรับบัญชีพนักงานราชการใหม่ (ฉบับที่ 8) ลว. 24 มีนาคม พ.ศ. 2558 " onClick="javscript:confirm_execute(22);" class="button" <?php echo $bgbtn_e2;?>> 
            <?}?>
			<? if ($UPDATE_DATE > '2015-04-01') { ?>
            <br><input type="submit" name="Copy" value="๑ เมษายน ๒๕๕๘" onClick="javscript:confirm_execute(3);" class="button" <?php echo $bgbtn3;?>  > 
            <input type="submit" name="Copy" value="๑ ตุลาคม ๒๕๕๘" onClick="javscript:confirm_execute(4);" class="button"  <?php echo $bgbtn4;?>  > 
            <input type="submit" name="Copy" value="๑ เมษายน ๒๕๕๙" onClick="javscript:confirm_execute(5);" class="button"  <?php echo $bgbtn5;?>  > 
            <input type="submit" name="Copy" value="๑ ตุลาคม ๒๕๕๙" onClick="javscript:confirm_execute(6);" class="button"  <?php echo $bgbtn6;?>  > 
            <input type="submit" name="Copy" value="๑ เมษายน ๒๕๖๐" onClick="javscript:confirm_execute(7);" class="button"  <?php echo $bgbtn7;?>  > 
            <input type="submit" name="Copy" value="๑ ตุลาคม ๒๕๖๐" onClick="javscript:confirm_execute(8);" class="button"  <?php echo $bgbtn8;?>  > 
            <?}?>
            <? } else { ?>
            <input name="image" type="image" onClick="javscript:confirm_execute(1);'" src="images/copy.png" alt="ปรับบัญชีข้าราชการใหม่" border="0">
			<?  if($BKK_FLAG != 1){ ?>
            <input name="image" type="image" onClick="javscript:confirm_execute(2);'" src="images/copy.png" alt="ปรับบัญชีพนักงานราชการใหม่" border="0">
            <?}?>
			<? if ($xxxxxxxxxxxx) { ?>
            <br><input name="image" type="image" onClick="javscript:confirm_execute(3);'" src="images/copy.png" alt="๑ เมษายน ๒๕๕๘" border="0">
            <input name="image" type="image" onClick="javscript:confirm_execute(4);'" src="images/copy.png" alt="๑ ตุลาคม ๒๕๕๘" border="0">
            <input name="image" type="image" onClick="javscript:confirm_execute(5);'" src="images/copy.png" alt="๑ เมษายน ๒๕๕๙" border="0">
            <input name="image" type="image" onClick="javscript:confirm_execute(6);'" src="images/copy.png" alt="๑ ตุลาคม ๒๕๕๙" border="0">
            <input name="image" type="image" onClick="javscript:confirm_execute(7);'" src="images/copy.png" alt="๑ เมษายน ๒๕๖๐" border="0">
            <input name="image" type="image" onClick="javscript:confirm_execute(8);'" src="images/copy.png" alt="๑ ตุลาคม ๒๕๖๐" border="0">
            <?}?>
            <?}?>
			<?}?>
           </td>
        </tr>
      </table></td>
    </tr>
  </table>
  <?
//  if(!$search_level_no_min) $search_level_no_min = 1;
// 	if(!$search_level_no_max) $search_level_no_max = 11;
	if(!$sort_by) $sort_by=1;
	$sort_type = (isset($sort_type))?  $sort_type : "1:asc";
	$arrSort=explode(":",$sort_type);
	$SortType[$arrSort[0]]	=$arrSort[1];
	if(!$order_by) $order_by=1;
	if(trim($search_type)) $arr_search_condition[] = "(LAYER_TYPE = $search_type)";
	if(trim($search_per_type)) $arr_search_condition[] = "(PER_TYPE = $search_per_type)";
  	if(trim($search_level_no_min)){ 
		if($DPISDB=="oci8") $arr_search_condition[] = "(a.LEVEL_NO >= '$search_level_no_min')";
		elseif($DPISDB=="odbc") $arr_search_condition[] = "(a.LEVEL_NO >= '$search_level_no_min')";
		elseif($DPISDB=="mysql") $arr_search_condition[] = "(a.LEVEL_NO >= '$search_level_no_min')";
	}
  	if(trim($search_level_no_max)){ 
		if($DPISDB=="oci8") $arr_search_condition[] = "(a.LEVEL_NO <= '$search_level_no_max')";
		elseif($DPISDB=="odbc") $arr_search_condition[] = "(a.LEVEL_NO <= '$search_level_no_max')";
		elseif($DPISDB=="mysql") $arr_search_condition[] = "(a.LEVEL_NO <= '$search_level_no_max')";
	}
  	if(trim($search_layer_no_min)) $arr_search_condition[] = "(LAYER_NO >= $search_layer_no_min)";
  	if(trim($search_layer_no_max)) $arr_search_condition[] = "(LAYER_NO <= $search_layer_no_max)";
  	if(trim($search_salary_min)) $arr_search_condition[] = "(LAYER_SALARY >= $search_salary_min)";
  	if(trim($search_salary_max)) $arr_search_condition[] = "(LAYER_SALARY <= $search_salary_max)";
	$search_condition = "";
	if ($BKK_FLAG==1 || $ISCS_FLAG==1) $search_condition = " and (b.LEVEL_ACTIVE=1)";
	if ($ISCS_FLAG==1) $arr_search_condition[] = "(a.LEVEL_NO in $LIST_LEVEL_NO)"; 
	if(count($arr_search_condition)) $search_condition = " and " . implode(" and ", $arr_search_condition);
	
	if($order_by==1){	//(ค่าเริ่มต้น) ลำดับที่
		$order_str = "LEVEL_SEQ_NO $SortType[$order_by], LEVEL_NO $SortType[$order_by], LAYER_NO $SortType[$order_by]";
  	}elseif($order_by==2) {	$order_str = "LAYER_NO $SortType[$order_by], LEVEL_SEQ_NO $SortType[$order_by], LEVEL_NO $SortType[$order_by]";
  	}elseif($order_by==3) {$order_str = "LAYER_SALARY $SortType[$order_by], LEVEL_SEQ_NO $SortType[$order_by], LEVEL_NO $SortType[$order_by]";
	}elseif($order_by==4) {	$order_str = "LAYER_TYPE $SortType[$order_by], LEVEL_SEQ_NO $SortType[$order_by], LEVEL_NO $SortType[$order_by]";
	}elseif($order_by==5) {	$order_str = "LAYER_SALARY_MIDPOINT $SortType[$order_by], LEVEL_SEQ_NO $SortType[$order_by], LEVEL_NO $SortType[$order_by]";
	}elseif($order_by==6) {	$order_str = "LAYER_SALARY_MIDPOINT1 $SortType[$order_by], LEVEL_SEQ_NO $SortType[$order_by], LEVEL_NO $SortType[$order_by]";
	}elseif($order_by==7) {	$order_str = "LAYER_SALARY_MIDPOINT2 $SortType[$order_by], LEVEL_SEQ_NO $SortType[$order_by], LEVEL_NO $SortType[$order_by]";
	}elseif($order_by==8) {	$order_str = "LAYER_SALARY_FULL $SortType[$order_by], LEVEL_SEQ_NO $SortType[$order_by], LEVEL_NO $SortType[$order_by]"; }

	$cmd =" select count(a.LAYER_TYPE) as count_data 
					from $table a, PER_LEVEL b
					where a.LEVEL_NO=b.LEVEL_NO $search_condition ";
	$db_dpis->send_cmd($cmd);
	//echo "$cmd<br>";
	//$db_dpis->show_error();
	$data = $db_dpis->get_array();
	$data = array_change_key_case($data, CASE_LOWER);
	$count_data = $data[count_data];	
	//echo "$count_data";
  ?>
  <table width="90%" align="center" cellpadding="0" cellspacing="0">
  	<tr>
	  <td><table width="15%" cellpadding="0" cellspacing="0" class="input_table" style="border-bottom:none;">
		  <tr>
		  	<td height="22" align="center" class="table_body"><?=$SEARCH_TITLE?></td>
		  </tr>		
	  </table></td>
	</tr>
  </table>
  <table width="90%" align="center"  border="0" cellspacing="0" cellpadding="0" >
        <tr>
          <td align="center" class="input_table"><table width="100%"  border="0" cellpadding="0" cellspacing="0" class="label_normal" 
		  onKeyPress="return keyEnter(event,document.form1.Submit3);">
            <tr>
              <td width="17%" align="right" height="22"><?=$LEVEL_TITLE?>&nbsp;:&nbsp;</td>
              <td><table width="100%" border="0" cellpadding="0" cellspacing="0" class="label_normal">
                <tr>
                  <td width="30%"><? list_per_level_master("search_level_no_min", $search_level_no_min); ?></td>
                  <td width="10%" align="center">&nbsp;&nbsp;-</td>
                  <td><? list_per_level_master("search_level_no_max", $search_level_no_max); ?></td>
                </tr>
              </table></td>
              <td width="15%" align="right">ขั้นเงินเดือน&nbsp;:&nbsp;</td>
              <td width="40%">
			  <input name="search_layer_no_min" type="text" class="textbox" value="<?=$search_layer_no_min?>" size="10" 
			  onKeyPress="return NumOnly();">
			  &nbsp;-&nbsp; 
			  <input name="search_layer_no_max" type="text" class="textbox" value="<?=$search_layer_no_max?>" size="10" 
			  onKeyPress="return NumOnly();">			  </td>
            </tr>
            <tr>
              <td align="right" height="22"><?=$SALARY_TITLE?>&nbsp;:&nbsp;</td>
              <td>
			  <input name="search_salary_min" type="text" class="textbox" value="<?=$search_salary_min?>" size="15" 
			  onKeyPress="return NumOnly();">
			  &nbsp;-&nbsp;
			  <input name="search_salary_max" type="text" class="textbox" value="<?=$search_salary_max?>" size="15" 
			  onKeyPress="return NumOnly();">			  </td>
              <td align="right">ประเภทข้าราชการ&nbsp;:&nbsp;</td>
              <td>
			  <select name="search_type" class="selectbox" style="width:80%">
			  	<option value="" <?=(($search_type=="")?"selected":"")?>>=== ทั้งหมด ===</option>
				<option value="1" <?=(($search_type==1)?"selected":"")?>>ทั่วไป (ท)</option>
				<option value="2" <?=(($search_type==2)?"selected":"")?>>ผู้บริหารระดับสูง (บ)</option>
			  </select>
			  </td>
            </tr>
            <tr>
              <td align="right" height="22"><?=$PER_TYPE_TITLE?>&nbsp;:&nbsp;</td>
              <td>
			  <select name="search_per_type" class="selectbox" style="width:80%">
			  	<option value="0" <?=(($search_per_type==0)?"selected":"")?>>=== ทั้งหมด ===</option>
				<option value="1" <?=(($search_per_type==1)?"selected":"")?>>ข้าราชการ</option>
				<option value="3" <?=(($search_per_type==3)?"selected":"")?>>พนักงานราชการ</option>
			  </select>
			  </td>
              <td align="right">&nbsp;</td>
              <td>&nbsp;</td>
            </tr>
            <tr>
              <td colspan="4" align="center"><? if ($BUTTON_DISPLAY==1) { ?>
                <input name="Submit3" type="submit" class="button" value="<?=$SEARCH_TITLE?>" onClick="form1.current_page.value=0;">
                <input name="Submit4" type="submit" class="button" value="<?=$SHOW_ALL_TITLE?>" onClick="javascript:form1.form1.search_level_no_min.value=''; form1.search_level_no_max.value=''; form1.search_layer_no_min.value=''; form1.search_layer_no_max.value=''; form1.search_salary_min.value=''; form1.search_salary_max.value=''; form1.search_type.value=''; form1.search_per_type.value=''; form1.current_page.value=0;">
                <? } else { ?>
                <input name="image2" type="image" onClick="javascript:form1.current_page.value=0;" src="images/search.png" alt="<?=$SEARCH_TITLE?>">
                <input name="image3" type="image" onClick="javascript:form1.form1.search_level_no_min.value=''; form1.search_level_no_max.value=''; form1.search_layer_no_min.value=''; form1.search_layer_no_max.value=''; form1.search_salary_min.value=''; form1.search_salary_max.value=''; form1.search_type.value=''; form1.search_per_type.value=''; form1.current_page.value=0;" src="images/showall.png" alt="<?=$SHOW_ALL_TITLE?>">
                <?}?></td>
              </tr>
          </table></td>
        </tr>
  </table>  
 &nbsp;
 <table width="90%" border="0" align="center" cellpadding="0" cellspacing="0">
<tr><td><input type="hidden" name="order_by" value="<?=$order_by?>">
    <input type="hidden" name="sort_by" value="<?=$sort_by;?>">
    <input type="hidden" name="sort_type" value="<?=$sort_type?>">
<?=$SORT_TITLE?></td>
</tr>
</table>
 <table width="90%" border="0" cellpadding="0" cellspacing="0" class="table_body_3" align="center">
 <tr><td>
  
 <table width="100%" border="0" cellpadding="0" cellspacing="0" class="table_body_3">
		<tr align="center">
		  <td width="26%" height="22" align="left"><? if($PAGE_AUTH["print"]=="Y"){ ?>
            <? if ($BUTTON_DISPLAY==1) { ?>
            <input name="btn_report" type="button" class="button" style="width:150" value="<?=$PDF_TITLE?>" onClick="call_rtf_pdf_report(0);"> 
			         <? if ($RTF_FLAG==1) { ?>
             <input name="btn21" type="button" class="button" style="width:150" value="<?=$RTF_TITLE?>" onClick="call_rtf_pdf_report(1);"> 
	                <? } ?>
            <?  } else { ?>
            <img src="images/doc_icon_pdf.jpg" border="0" alt="<?=$PDF_TITLE?>" onClick="call_rtf_pdf_report(0);"> 
			         <? if ($RTF_FLAG==1) { ?>
             <img src="images/doc_icon_word.jpg" border="0" alt="<?=$RTF_TITLE?>" onClick="call_rtf_pdf_report(1);"> 
	                  <? } ?>
            <? } ?>            <? }else{ echo "&nbsp;"; } ?></td>
		          <td width="59%" align="center">พบข้อมูลบัญชีอัตราเงินเดือนทั้งสิ้น 
                    <?=($count_data + 0)?>
                    รายการ</td>
		  <td width="15%" align="right"><? if($PAGE_AUTH["print"]=="Y"){ ?>
            <? if ($BUTTON_DISPLAY==1) { ?>
            <input name="btn_export" type="button" class="button" style="width:130" value="<?=$EXCEL_TITLE?>" onClick="call_export_file();">
            <?  } else { ?>
            <img src="images/doc_icon_excel.jpg" border="0" alt="<?=$EXCEL_TITLE?>" onClick="call_export_file();">
            <? } ?>            <? }else{ echo "&nbsp;"; } ?></td>
		</tr>
	  </table>
</td></tr>
</table>
  <?
	$total_page = ceil( $count_data / $data_per_page );
	$page_link = create_link_page($total_page, $current_page);
	$limit_data = "";

	if($current_page > 1){
		if($DPISDB=="odbc"){
			$cmd = " 	select 		top $start_record trim(LAYER_TYPE) + '|' + trim(a.LEVEL_NO) + '|' + trim(LAYER_NO) as concat_pk 
							 from 		$table a, PER_LEVEL b
							 where		a.LEVEL_NO=b.LEVEL_NO
											$search_condition 
							 order by $order_str ";
			$db_dpis->send_cmd($cmd);
			while($data = $db_dpis->get_array()) $arr_exclude[] = "'".$data[concat_pk]."'";
			$limit_data = " and trim(LAYER_TYPE) + '|' + trim(a.LEVEL_NO) + '|' + trim(LAYER_NO) not in (". implode(", ", $arr_exclude) .")";
		}elseif($DPISDB=="mysql"){
  			$limit_data = " limit " . (($current_page - 1) * $data_per_page) . ", " . $data_per_page;
		}
	}

	if($DPISDB=="odbc"){
		$cmd = "	select			top $data_per_page  
										LAYER_TYPE, a.LEVEL_NO, LAYER_NO, LAYER_SALARY, LAYER_ACTIVE, LAYER_SALARY_MIN, 
										LAYER_SALARY_MAX, b.LEVEL_NAME, b.PER_TYPE, LAYER_SALARY_MIDPOINT, 
										LAYER_SALARY_MIDPOINT1, LAYER_SALARY_MIDPOINT2, LAYER_SALARY_FULL 
							from			$table a, PER_LEVEL b
							where		a.LEVEL_NO=b.LEVEL_NO
											$search_condition
											$limit_data
							order by 	$order_str ";
	}elseif($DPISDB=="oci8"){				  
		$rec_start = (($current_page-1) * $data_per_page) + 1;
		$rec_end = ($current_page > 1)? ($current_page * $data_per_page) : $data_per_page;
		// $cmd = "select * from (
		// 				   select rownum rnum, q1.* from ( 
		// 						  select 		LAYER_TYPE, a.LEVEL_NO, LAYER_NO, LAYER_SALARY, LAYER_ACTIVE, LAYER_SALARY_MIN, 
		// 						  					LAYER_SALARY_MAX, b.LEVEL_NAME, b.PER_TYPE, LAYER_SALARY_MIDPOINT, 
		// 											LAYER_SALARY_MIDPOINT1, LAYER_SALARY_MIDPOINT2, LAYER_SALARY_FULL,
    //                                                                                                     LAYER_SALARY_TEMPUP
		// 						  from 			$table a, PER_LEVEL b
		// 						  where		a.LEVEL_NO=b.LEVEL_NO
		// 						  					$search_condition 
		// 						  order by 	$order_str
		// 				   )  q1
    // 			) where rnum between $rec_start and $rec_end ";
    $cmd = "select * from (
						   select rownum rnum, q1.* from ( 
								  select 		LAYER_TYPE, a.LEVEL_NO, LAYER_NO, LAYER_SALARY, LAYER_ACTIVE, LAYER_SALARY_MIN, 
								  					LAYER_SALARY_MAX, b.LEVEL_NAME, b.PER_TYPE, LAYER_SALARY_MIDPOINT, 
													LAYER_SALARY_MIDPOINT1, LAYER_SALARY_MIDPOINT2, LAYER_SALARY_FULL
								  from 			$table a, PER_LEVEL b
								  where		a.LEVEL_NO=b.LEVEL_NO
								  					$search_condition 
								  order by 	$order_str
						   )  q1
					) where rnum between $rec_start and $rec_end ";
		}elseif($DPISDB=="mysql"){
			$cmd = " select 		LAYER_TYPE, a.LEVEL_NO, LAYER_NO, LAYER_SALARY, LAYER_ACTIVE, LAYER_SALARY_MIN, 
												LAYER_SALARY_MAX, b.LEVEL_NAME, b.PER_TYPE, LAYER_SALARY_MIDPOINT, 
												LAYER_SALARY_MIDPOINT1, LAYER_SALARY_MIDPOINT2, LAYER_SALARY_FULL
								  from 		$table a, PER_LEVEL b
								  where	a.LEVEL_NO=b.LEVEL_NO
												$search_condition 
								  order by 	$order_str
												$limit_data ";				 					 
		} // end if
	$count_page_data = $db_dpis->send_cmd($cmd);
	//echo"<pre>".($cmd);
	//$db_dpis->show_error();
	if ($count_page_data) {
		$current_list = "";
		$data_count = 0;
?>
  <table width="90%" border="0" align="center" cellpadding="1" cellspacing="1" class="label_normal">
    <tr align="center" class="table_head" height="21">
      <td nowrap onClick="call_sort(1);"><strong><? if($order_by==1&&$sort_by==1){  if($SortType[$order_by]=="asc"){  echo $SORT_ASC;  }else{ echo $SORT_DESC; } }else{  echo $SORT_CUR;  } ?></strong>        <?=$LEVEL_TITLE?></td>
      <td nowrap width="8%" onClick="call_sort(2);"><strong><? if($order_by==2&&$sort_by==2){  if($SortType[$order_by]=="asc"){  echo $SORT_ASC;  }else{ echo $SORT_DESC; } }else{  echo $SORT_CUR;  } ?>ขั้น</strong></td>
      <td nowrap width="15%" onClick="call_sort(3);"><strong><? if($order_by==3&&$sort_by==3){  if($SortType[$order_by]=="asc"){  echo $SORT_ASC;  }else{ echo $SORT_DESC; } }else{  echo $SORT_CUR;  } ?><?=$SALARY_TITLE?></strong></td>
      <td nowrap width="15%" onClick="call_sort(4);"><strong><? if($order_by==4&&$sort_by==4){  if($SortType[$order_by]=="asc"){  echo $SORT_ASC;  }else{ echo $SORT_DESC; } }else{  echo $SORT_CUR;  } ?>ประเภท<br>บัญชีเงินเดือน</strong></td>
      <td nowrap width="8%" onClick="call_sort(5);"><strong><? if($order_by==5&&$sort_by==5){  if($SortType[$order_by]=="asc"){  echo $SORT_ASC;  }else{ echo $SORT_DESC; } }else{  echo $SORT_CUR;  } ?>ฐานในการคำนวณ/<br>0.5 ขั้น</strong></td>
      <td nowrap width="8%" onClick="call_sort(6);"><strong><? if($order_by==6&&$sort_by==6){  if($SortType[$order_by]=="asc"){  echo $SORT_ASC;  }else{ echo $SORT_DESC; } }else{  echo $SORT_CUR;  } ?>ฐานในการคำนวณล่าง/<br>1 ขั้น</strong></td>
      <td nowrap width="8%" onClick="call_sort(7);"><strong><? if($order_by==7&&$sort_by==7){  if($SortType[$order_by]=="asc"){  echo $SORT_ASC;  }else{ echo $SORT_DESC; } }else{  echo $SORT_CUR;  } ?>ฐานในการคำนวณบน/<br>1.5 ขั้น</strong></td>
      <td nowrap width="8%" onClick="call_sort(8);"><strong><? if($order_by==8&&$sort_by==8){  if($SortType[$order_by]=="asc"){  echo $SORT_ASC;  }else{ echo $SORT_DESC; } }else{  echo $SORT_CUR;  } ?>เงินเดือนพิเศษ/<br>เต็มขั้น</strong></td>
      <?if($PAGE_AUTH["edit"]=="Y"){?>
      <td width="4%"><?=$EDIT_TITLE?></td>
      <?}?>
      <?if($PAGE_AUTH["del"]=="Y"){?>
      <td width="4%"><?=$DEL_TITLE?></td>
      <?}?>
      <td nowrap width="4%"><strong>ใช้งาน/<br>ยกเลิก</strong></td>
    </tr>
    <?
	while ($data = $db_dpis->get_array()) {
		$data_count++;
		if($data_count > $data_per_page) break;
		$temp_LAYER_TYPE = $data[LAYER_TYPE];
		$temp_LEVEL_NO = trim($data[LEVEL_NO]);
		$LEVEL_NAME = $data[LEVEL_NAME];
		$LAYER_SALARY_MIDPOINT = number_format($data[LAYER_SALARY_MIDPOINT], 2, ".", ",");
		$LAYER_SALARY_MIDPOINT1 = number_format($data[LAYER_SALARY_MIDPOINT1], 2, ".", ",");
		$LAYER_SALARY_MIDPOINT2 = number_format($data[LAYER_SALARY_MIDPOINT2], 2, ".", ",");
		$LAYER_SALARY_FULL = number_format($data[LAYER_SALARY_FULL], 2, ".", ",");
		$PER_TYPE = $data[PER_TYPE];
		$temp_LAYER_NO = $data[LAYER_NO];
		$current_list .= ((trim($current_list))?", ":"") . "'" . $temp_LAYER_TYPE."|".$temp_LEVEL_NO."|".$temp_LAYER_NO ."'";
		$LAYER_SALARY = number_format($data[LAYER_SALARY], 2, ".", ",");
		$LAYER_ACTIVE = $data[LAYER_ACTIVE];
		$LAYER_SALARY_MIN = number_format($data[LAYER_SALARY_MIN], 2, ".", ",");
		$LAYER_SALARY_MAX = number_format($data[LAYER_SALARY_MAX], 2, ".", ",");
                $LAYER_SALARY_TEMPUP = number_format($data[LAYER_SALARY_TEMPUP], 2, ".", ",");
		
		if ($temp_LAYER_TYPE == 1) 	 		$LAYER_TYPE_text = "ทั่วไป (ท)"; 
		elseif ($temp_LAYER_TYPE == 2) 		$LAYER_TYPE_text = "ผู้บริหารระดับสูง (บ)"; 
		elseif ($temp_LAYER_TYPE == 0) 		$LAYER_TYPE_text = $LAYER_TYPE_TITLE; 
		if($temp_LAYER_NO==0) $LAYER_SALARY = $LAYER_SALARY_MIN ." - ". $LAYER_SALARY_MAX;
		
		$class = "table_body";
		$onmouse_event = " onMouseOver=\"this.className='table_body_over';\" onMouseOut=\"this.className='table_body';\" ";
		if($LAYER_TYPE==$temp_LAYER_TYPE && $LEVEL_NO==$temp_LEVEL_NO && $LAYER_NO==$temp_LAYER_NO){ 
			$class = "table_body_over";
			$onmouse_event = "";
		} // end if
?>
    <tr class="<?=$class?>" <?=$onmouse_event?>>
      <td align="center">&nbsp;<?=$LEVEL_NAME?></td>      
      <td align="center">&nbsp;<?=$temp_LAYER_NO?></td>
      <td align="right"><?="$LAYER_SALARY"?>&nbsp;</td>
      <td align="center" valign="bottom">&nbsp;<?=$LAYER_TYPE_text?></td>
      <td align="right"><?="$LAYER_SALARY_MIDPOINT"?>&nbsp;</td>
      <td align="right"><?="$LAYER_SALARY_MIDPOINT1"?>&nbsp;</td>
      <td align="right"><?="$LAYER_SALARY_MIDPOINT2"?>&nbsp;</td>
      <td align="right"><?="$LAYER_SALARY_FULL"?>&nbsp;</td>
	  <?if($PAGE_AUTH["edit"]=="Y"){?>
      <td align="center">&nbsp;<a href="<?=("javascript:form1.action+='?UPD=1';".(($temp_LAYER_TYPE==1)?("form1.".LAYER_TYPE."[0].checked=true;"):(($temp_LAYER_TYPE==2)?("form1.".LAYER_TYPE."[1].checked=true;"):("form1.".LAYER_TYPE."[2].checked=true;")))."form1.".LEVEL_NO.".value='".$temp_LEVEL_NO."';form1.".LAYER_NO.".value='".$temp_LAYER_NO."';form1.submit()")?>"><img src="images/b_edit.png" border="0" alt="แก้ไขบัญชีอัตราเงินเดือน"></a></td>
	  <?}?>
	  <?if($PAGE_AUTH["del"]=="Y"){?>
      <td align="center">&nbsp;<a href="<?=("javascript:confirm_delete('".$temp_LAYER_TYPE."','".$temp_LEVEL_NO."','".$temp_LAYER_NO."','".$LAYER_TYPE_text."')")?>"><img src="images/b_drop.png" border="0" alt="ลบบัญชีอัตราเงินเดือน"></a></td>
	  <?}?>
      <td align="center"><input type="checkbox" name="list_show_id[]" value="'<?=$temp_LAYER_TYPE."|".$temp_LEVEL_NO."|".$temp_LAYER_NO?>'" <?=(($LAYER_ACTIVE==1)?"checked":"")?>>
      </td>
    </tr>
    <? } ?>
	<?if($PAGE_AUTH["edit"]=="Y"){?>
    <tr class="table_footer">
      <td>&nbsp;</td>
      <td>&nbsp;</td>
      <td>&nbsp;</td>
      <td>&nbsp;</td>
      <td>&nbsp;</td>
      <td>&nbsp;</td>
      <td>&nbsp;</td>
      <td>&nbsp;</td>
      <?if($PAGE_AUTH["edit"]=="Y"){?><td>&nbsp;</td><?}?>
      <?if($PAGE_AUTH["del"]=="Y"){?><td>&nbsp;</td><?}?>
      <td align="center"><? if ($BUTTON_DISPLAY==1) { ?>
        <input type="submit" name="btn2" value="<?=$SETFLAG_TITLE?>" onClick="form1.command.value='SETFLAG'" class="button" style="width:98%">
        <?  } else { ?>
        <input name="image4" type="image" onClick="form1.command.value='SETFLAG'" src="images/save.png" alt="<?=$SETFLAG_TITLE?>" border="0">
        <? } ?></td>
    </tr>
	<?}?>
  </table>
  <? if($total_page > 1) : ?>
  <table width="90%" border="0" align="center" cellpadding="2" cellspacing="2" class="label_normal">
    <tr>
      <td><?=$page_link?></td>
    </tr>
  </table>
  <? endif; ?>&nbsp;
  <? } // if  count show ?>
  			<input type="hidden" name="current_list" value="<?=$current_list?>">
        </form>	
		</td>
	</tr>
</table>
</body>
<script language="JavaScript" src="java_scripts/menu_layer.js"></script>
</html>
