<? 
	include("../php_scripts/connect_database.php");
	include("php_scripts/per_develop_plan.php"); 
?>
<html>
<head>
<title><?=$webpage_title?> - <?=$MENU_TITLE_LV0?><?if($MENU_ID_LV1){?> - <?=$MENU_TITLE_LV1?><?}?><?if($MENU_ID_LV2){?> - <?=$MENU_TITLE_LV2?><?}?><?if($MENU_ID_LV3){?> - <?=$MENU_TITLE_LV3?><?}?></title>
<meta http-equiv="Content-Type" content="text/html; charset=windows-874">
<link rel="stylesheet" href="<?=$cssfileselected?>" type="text/css">
<link rel="alternate stylesheet" type="text/css" media="all" href="stylesheets/calendar-blue.css" title="winter"/>
</head>
<script type="text/javascript" src="java_scripts/chk_date.js"></script>
<script type="text/javascript" src="java_scripts/calendar.js"></script>
<script type="text/javascript" src="java_scripts/calendar-th.js"></script> 
<script type="text/javascript" src="java_scripts/function_utility.js"></script> 
<script language="JavaScript">

	function exit_prog( kf_id ) {
		if(confirm("ต้องการจบโปรแกรมนี้ใช่หรือไม่?")){
			parent.refresh_opener( kf_id );
			return true;
		}else{
			return false;
		}
	}

	function call_save( ) {
		document.form1.command.value="SAVE";
		var guide_id=document.form1.GUIDE_ID.value;
		var desc=document.form1.DESCRIPTION.value;
		var startd=document.form1.STARTDATE.value;
		var endd=document.form1.ENDDATE.value;
		if (!guide_id) {
			alert("โปรดเลือก รายการแนวทางพัฒนาก่อน!..");
		} else if (!desc || desc.length == 0) {
			alert("โปรดเลือก รายการแนวทางพัฒนาก่อน!..");
		} else {
			document.form1.submit();
		}
	}

	function call_clear( ) {
		document.form1.command.value="";
		document.form1.GUIDE_ID.value="";
		document.form1.DESCRIPTION.value="";
		document.form1.STARTDATE.value="";
		document.form1.ENDDATE.value="";
	}

	function call_selected( guide_id, term ) {
		document.form1.command.value="";
		document.form1.GUIDE_ID.value=guide_id;
		document.form1.TERM.value=term;
		document.form1.DESCRIPTION.value="";
		document.form1.STARTDATE.value="";
		document.form1.ENDDATE.value="";
		document.form1.submit();
	}

	function call_fill_date( term ) {
		if (isNaN(term)) { term=0; }
		var currDate = new Date();
		var rpDate = currDate.getDate().toString() + "/" + currDate.getMonth().toString() + "/" + currDate.getFullYear().toString(); 
		document.form1.STARTDATE.value=rpDate;
		currDate.setMonth(currDate.getMonth() + term);
		rpDate = currDate.getDate().toString() + "/" + currDate.getMonth().toString() + "/" + currDate.getFullYear().toString(); 
		document.form1.ENDDATE.value=rpDate;
	}

</script>
<span id="defaultTheme"></span>
<body>
<table width="100%" border="0" cellspacing="0" cellpadding="0" class="label_normal">
  	<tr>
    	<td align="left" valign="top">
		<form name="form1" method="post" action="per_develop_plan.html" enctype="multipart/form-data">
		  <input type="hidden" name="MENU_ID_LV0" value="<?=$MENU_ID_LV0?>">
		  <input type="hidden" name="MENU_ID_LV1" value="<?=$MENU_ID_LV1?>">
		  <input type="hidden" name="MENU_ID_LV2" value="<?=$MENU_ID_LV2?>">
		  <input type="hidden" name="MENU_ID_LV3" value="<?=$MENU_ID_LV3?>">
          <input type="hidden" name="command" value="">
          <input type="hidden" name="KF_ID" value="<?=$KF_ID?>">
          <input type="hidden" name="CP_CODE" value="<?=$CP_CODE?>">
          <input type="hidden" name="GONEXT_LEVEL" value="<?=$GONEXT_LEVEL?>">
          <input type="hidden" name="PLAN_ID" value="<?=$PLAN_ID?>">
  			<table width="100%" align="center" cellpadding="0" cellspacing="0" class="input_table">
    			<tr>
      				<td>
						<table width="100%" border="0" align="center" cellpadding="0" cellspacing="0" class="label_normal">
        					<tr class="table_head">
         						<td height="25" class="table_head">&nbsp;&nbsp;การวางแผนพัฒนาสมรรถนะของข้าราชการ <B><?=$DEPARTMENT_NAME?></B></td><td></td>
        					</tr>
        					<tr class="table_head">
         						<td height="25" class="table_head">&nbsp;&nbsp;ประจำรอบการประเมินครั้งที่ <B><?=$KF_CYCLE?></B> พ.ศ. <B><?=$KF_YEAR?></B>  <?=$ORG_TITLE?> <B><?=$ORG_NAME?></B></td>
								<td>	</td>
        					</tr>
							<tr>
								<td height="25" class="table_head">&nbsp;ผู้ทำแผน&nbsp;:&nbsp;<B><U><?=$PER_ID?></U>&nbsp;&nbsp;<U><?=$PER_NAME?></U></B>&nbsp;&nbsp;ตำแหน่งงาน <B><?=$PL_NAME?></B></td><td>	</td>
							</tr>					
							<tr>
								<td height="25" class="table_head">&nbsp;สมรรถนะ&nbsp;:&nbsp;<B><U><?=$CP_CODE?></U>&nbsp;&nbsp;<U><?=$CP_NAME?></U></B>&nbsp;&nbsp;ระดับที่จะไปสู่ : <B><U><?=($GONEXT_LEVEL)?></U></B></td><td>	</td>
							</tr>					
          				</table>
          			</td>
        		</tr>
				<tr>
					<td>
						<table width="100%" border="0" align="center" cellpadding="1" cellspacing="1" class="label_normal">
							<tr> <td height="15"><input type="hidden" name="GUIDE_ID" value="<?=$GUIDE_ID?>"><input type="hidden" name="TERM" value="<?=$TERM?>"></td> </tr>
							<tr> <td height="15" width="7%" align="right">แนวทาง :</td>
									<td height="15" width="90%">&nbsp;<textarea name="DESCRIPTION" rows="3" class="selectbox" style="width:100%"><?=$DESCRIPTION?></textarea></td>
									<td height="15" width="3%"></td> 
							</tr>
							<tr> <td height="15" width="7%" align="right">เริ่ม :</td>
									<td height="15" width="90%">&nbsp;<input type="text" name="STARTDATE" value="<?=$STARTDATE?>" width="20%" onDblClick="call_fill_date( <?=$TERM?>)">&nbsp;&nbsp;&nbsp;&nbsp;ถึง&nbsp;:&nbsp;<input type="text" name="ENDDATE" value="<?=$ENDDATE?>" width="20%"></td>
									<td height="15" width="3%"></td> 
							</tr>
							<tr> <td height="15" width="7%" align="right"></td>
									<td height="15" align="center">
											<input type="button" name="btn_save" class="button" value=" บันทึก " onClick="call_save( );">&nbsp;&nbsp;&nbsp;&nbsp;
											<input type="button" name="btn_clear" class="button" value=" <?=$CLEAR_TITLE?> " onClick="call_clear( );">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
											<input type="button" name="btn_save" class="button" value=" <?=$DEL_TITLE?> " onClick="call_delete( );">
									</td> 
									<td height="15" width="7%" align="right"></td>
							</tr>
						</table>
					</td>
				</tr>
				<tr>
					<td>
						<table width="100%" border="0" align="center" cellpadding="1" cellspacing="1" class="label_normal">
        					<tr  align="center" class="table_head">
								<td height="25" align="center" width="4%">ID</td>
								<td height="25" align="center" width="4%">เลือก</td>
								<td height="25" align="center" width="84%">แนวทางการพัฒนา</td>
								<td height="25" align="center" width="8%">ระยะเวลา(เดือน)</td>
							</tr>
							<?
							$class = "table_body";
							$onmouse_event = " onMouseOver=\"this.className='table_body_over';\" onMouseOut=\"this.className='table_body';\" ";

							for($data_count=0; $data_count < count($arr_content); $data_count++) {
							?>
		 					<tr  class="<?=$class?>" <?=$onmouse_event?>>
								<td height="25" align="center">
									<? echo $arr_content[$data_count][guide_id]; ?>&nbsp;
								</td>
								<td height="25" align="center">
									<input type="radio" name="SEL_ITEM" value="<?=$arr_content[$data_count][guide_id]?>" onClick="call_selected(<?=$arr_content[$data_count][guide_id]?>,<?=$arr_content[$data_count][term]?>);" <?=($arr_content[$data_count][guide_id]==$GUIDE_ID)?"checked":""?>>
								</td>
								<td>
									<?=$arr_content[$data_count][description]?>
								</td>
								<td height="25" align="center">
									<?=$arr_content[$data_count][term]?>
								</td>
							</tr>
							<? } // end loop for $data_count
							?>
						</table>
					</td>
				</tr>
      		</table>
		</form>
		</td>
    </tr>
</table>
</body>
<script type="text/javascript">
setActiveStyleSheet(document.getElementById("defaultTheme"), "winter");
</script>
</html>
